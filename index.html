<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Adventures</title>

    <!-- Redirect to mobile version if screen is too small -->
    <script src="scripts/mobile-redirect.js"></script>

    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/journeymap.css">
    
</head>
<body class="journey-page">

    <div class="journey-header-container">

        <div class="j-header-actions">
            <button id="insightsBtn" class="insights-btn">Parents/Guardians</button>
        </div>

        <h1><span class="character-name-placeholder" data-possessive="true">userName</span> Adventures</h1>

        <!-- Will display the progress of each chapter in the header instead -->
        <div class="j-header-progress-container">
            <div class="j-header-progress-bar"></div>
            <div class="j-header-stage-name">STAGE 1</div> <!-- Will dynamically update to display the current stage (which is the chapter number) here -->
        </div>

    </div>

    <div class="journey-map-container">
        <!-- Journey stage nodes will be dynamically generated here -->
         
        <!-- <div class="journey-stage-node">
            <div class="node-container" id="STAGE-1-1">
                <div class="node-inner-container">
                    <div class="node-content">
                        <div class="book-aesthetic-line"></div>
                        <div class="book-title-container">
                            <h3 class="stage-chapter">Chapter One</h3>
                            <h1 class="stage-title">Billy's Huge Discovery</h1>
                        </div>
                        <div class="completion-status-container">Completed</div>
                    </div>
                </div>
            </div>
            <div class="node-shadow"></div>
        </div> -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user has completed onboarding
            const userData = localStorage.getItem('user_data');
            if (!userData) {
                // No user data, redirect to welcome page
                window.location.href = 'welcome.html';
                return;
            }
            
            // Parse user data and check for required onboarding fields
            const parsedData = JSON.parse(userData);
            if (!parsedData.characterName) {
                console.log('User has not completed onboarding');
                window.location.href = 'welcome.html';
                return;
            }
            
            // Set up insights button
            document.getElementById('insightsBtn').addEventListener('click', function() {
                window.location.href = 'insights.html';
            });
        });
    </script>
    <script src="scripts/script.js"></script>
    <script src="scripts/journey-map.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Adventures</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="journey-page">

    <div class="journey-header-container">

        <div class="j-header-actions">
            <button id="insightsBtn" class="insights-btn">Parents/Guardians</button>
        </div>

        <h1><span class="character-name-placeholder" data-possessive="true">userName</span> Adventures</h1>

        <!-- Will display the progress of each chapter in the header instead -->
        <div class="j-header-progress-container">
            <div class="j-header-progress-bar"></div>
            <div class="j-header-stage-name">STAGE 1</div> <!-- Will dynamically update to display the current stage (which is the chapter number) here -->
        </div>

    </div>

    <div class="journey-map-container">
        <!-- Journey stage nodes will be dynamically generated here -->
         
        <!-- example story node -->
        <div class="journey-stage-node">
            <div class="node-container" id="STAGE-1-1">
                <div class="completion-status-icon"> 
                    <svg class="locked-lock-icon" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>
                    <svg class="unlocked-lock-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"></svg>
                    <svg class="completed-tick-icon" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg"></svg>
                </div>
                
                <h1 class="stage-title">Billy's Huge Discovery</h1>
                <div class="stage-number-container">STAGE <span class="stage-number">1</span> - <span class="story-number">1</span></div>

                <div class="story-book-container">
                    <div class="book-aesthetic-line"></div>
                    <img class="story-book-cover-image" src="/assets/images/default_placeholder.png" alt="Story Book Cover">
                </div>
            </div>

            <div class="node-shadow"></div>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user has completed onboarding
            const userData = localStorage.getItem('user_data');
            if (!userData) {
                // No user data, redirect to welcome page
                window.location.href = 'welcome.html';
                return;
            }
            
            // Parse user data and check for required onboarding fields
            const parsedData = JSON.parse(userData);
            if (!parsedData.characterName) {
                console.log('User has not completed onboarding');
                window.location.href = 'welcome.html';
                return;
            }
            
            // Set up insights button
            document.getElementById('insightsBtn').addEventListener('click', function() {
                window.location.href = 'insights.html';
            });
        });
    </script>
    <script src="scripts/script.js"></script>
</body>
</html>